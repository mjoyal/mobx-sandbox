import { FinalizationRegistry as FinalizationRegistryMaybeUndefined } from "mobx-react-lite/src/utils/FinalizationRegistryWrapper"
import { createReactionCleanupTrackingUsingFinalizationRegister } from "mobx-react-lite/src/utils/createReactionCleanupTrackingUsingFinalizationRegister"
import { createTimerBasedReactionCleanupTracking } from "mobx-react-lite/src/utils/createTimerBasedReactionCleanupTracking"
export { IReactionTracking } from "mobx-react-lite/src/utils/reactionCleanupTrackingCommon"

const {
    addReactionToTrack,
    recordReactionAsCommitted,
    resetCleanupScheduleForTests,
    forceCleanupTimerToRunNowForTests
} = FinalizationRegistryMaybeUndefined
    ? createReactionCleanupTrackingUsingFinalizationRegister(FinalizationRegistryMaybeUndefined)
    : createTimerBasedReactionCleanupTracking()

export {
    addReactionToTrack,
    recordReactionAsCommitted,
    resetCleanupScheduleForTests,
    forceCleanupTimerToRunNowForTests
}
